<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LINE x n8n x AI ç›£æ¸¬åŠ©ç† | å°ˆæ¡ˆäº’å‹•è¨ˆç•«æ›¸</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap');
        
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #fdfbf7; /* Warm neutral background */
            color: #4a4a4a;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #d6d3d1;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #a8a29e;
        }

        /* Chart Container Styling - Mandatory Requirements */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }

        /* Chat Bubble Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .message-anim {
            animation: fadeIn 0.3s ease-out forwards;
        }

        .tab-active {
            border-bottom: 2px solid #ea580c; /* Orange-600 */
            color: #ea580c;
            font-weight: 500;
        }
        .tab-inactive {
            color: #78716c; /* Stone-500 */
        }
        .tab-inactive:hover {
            color: #44403c; /* Stone-700 */
        }

        /* Card Hover Effect */
        .interactive-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .interactive-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            border-color: #ea580c;
        }
    </style>
    <!-- Chosen Palette: Warm Neutrals (Stone/Orange/Slate) - Stone (#fdfbf7, #e7e5e4, #44403c) with Warm Orange Accents (#ea580c) for actions/highlights. Represents stability and utility. -->
    
    <!-- Application Structure Plan: 
         1. Hero Section: Overview of the project vision.
         2. Scenario Simulator (Interactive): Users can "play" the 5 scenarios (A-E) in a mock LINE interface to understand the UX flow.
         3. Workflow & Architecture (Exploratory): Tabbed view of the 3 workflows + AI Logic, allowing users to drill down into technical details (Regex, Prompts).
         4. Data Model (Visual): A visual representation of the Master_Sync table.
         5. Implementation Tracker (Dynamic): A checklist that updates a Chart.js Doughnut chart, visualizing project progress.
         
         Why this structure? It moves from "What it looks like" (Simulator) to "How it works" (Architecture) to "Current Status" (Tracker), catering to both stakeholders and developers.
    -->

    <!-- Visualization & Content Choices:
         - Simulator: HTML/JS Chat Interface -> Goal: Inform/Experience -> Shows exactly how the bot interacts.
         - Workflow Tabs: Interactive Cards -> Goal: Organize -> Breaks down complex logic into digestible steps.
         - Implementation Chart: Chart.js Doughnut -> Goal: Inform/Track -> Visualizes the completion rate of the checklist.
         - Robustness Cards: Grid Layout -> Goal: Inform -> Highlights key technical solutions.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="antialiased">

    <!-- Navigation / Header -->
    <nav class="bg-white border-b border-stone-200 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <span class="text-2xl font-bold text-stone-800 tracking-tight">ç›£æ¸¬åŠ©ç† <span class="text-orange-600">Plan</span></span>
                </div>
                <div class="flex items-center space-x-4">
                    <a href="#simulator" class="text-stone-600 hover:text-orange-600 px-3 py-2 text-sm font-medium">é«”é©—æ¨¡æ“¬</a>
                    <a href="#architecture" class="text-stone-600 hover:text-orange-600 px-3 py-2 text-sm font-medium">ç³»çµ±æ¶æ§‹</a>
                    <a href="#implementation" class="text-stone-600 hover:text-orange-600 px-3 py-2 text-sm font-medium">å¯¦ä½œé€²åº¦</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <div class="bg-stone-50 py-12 border-b border-stone-200">
        <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h1 class="text-4xl font-extrabold text-stone-900 sm:text-5xl mb-4">
                LINE x n8n x AI <br><span class="text-orange-600">è·¨è¡¨å¡«å¯«ç‹€æ…‹ç›£æ¸¬åŠ©ç†</span>
            </h1>
            <p class="mt-4 text-xl text-stone-600 max-w-3xl mx-auto">
                è§£æ±º Google Sheets å”ä½œéºæ¼å•é¡Œçš„è‡ªå‹•åŒ–è§£æ±ºæ–¹æ¡ˆã€‚çµåˆ LINE çš„å³æ™‚æ€§ã€n8n çš„è‡ªå‹•åŒ–æµç¨‹ä»¥åŠ LLM çš„èªæ„ç†è§£ï¼Œæ‰“é€ ç„¡ç¸«çš„å¡«å¯«æé†’é«”é©—ã€‚
            </p>
            <div class="mt-8 flex justify-center gap-4">
                <div class="flex flex-col items-center p-4 bg-white rounded-lg shadow-sm border border-stone-100 w-24">
                    <span class="text-2xl mb-1">ğŸ’¬</span>
                    <span class="text-xs font-bold text-stone-500">LINE API</span>
                </div>
                <div class="flex flex-col items-center p-4 bg-white rounded-lg shadow-sm border border-stone-100 w-24">
                    <span class="text-2xl mb-1">âš¡</span>
                    <span class="text-xs font-bold text-stone-500">n8n Cloud</span>
                </div>
                <div class="flex flex-col items-center p-4 bg-white rounded-lg shadow-sm border border-stone-100 w-24">
                    <span class="text-2xl mb-1">ğŸ§ </span>
                    <span class="text-xs font-bold text-stone-500">AI Node</span>
                </div>
                <div class="flex flex-col items-center p-4 bg-white rounded-lg shadow-sm border border-stone-100 w-24">
                    <span class="text-2xl mb-1">ğŸ“Š</span>
                    <span class="text-xs font-bold text-stone-500">Sheets</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Section 2: Scenario Simulator -->
    <section id="simulator" class="py-16 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
                <!-- Left: Controls -->
                <div>
                    <h2 class="text-3xl font-bold text-stone-900 mb-6">æƒ…å¢ƒæ¨¡æ“¬å™¨ (User Journey)</h2>
                    <p class="text-stone-600 mb-8">
                        é»æ“Šä¸‹æ–¹æƒ…å¢ƒæŒ‰éˆ•ï¼Œæ¨¡æ“¬ä½¿ç”¨è€…èˆ‡ç³»çµ±çš„äº’å‹•æµç¨‹ã€‚é€™èƒ½å¹«åŠ©æ‚¨ç†è§£ç³»çµ±å¦‚ä½•åœ¨ä¸åŒå ´æ™¯ä¸‹é‹ä½œã€‚
                    </p>
                    
                    <div class="space-y-4">
                        <button onclick="playScenario('A')" class="interactive-card w-full text-left p-4 bg-stone-50 border border-stone-200 rounded-xl hover:bg-orange-50 group">
                            <div class="flex justify-between items-center">
                                <span class="font-bold text-stone-800 group-hover:text-orange-700">æƒ…å¢ƒ Aï¼šæ–°ç”¨æˆ¶åŠ å…¥ (Onboarding)</span>
                                <span class="text-stone-400">â†’</span>
                            </div>
                            <p class="text-sm text-stone-500 mt-1">è¨­å®šçœŸå¯¦å§“åã€åˆ¥åèˆ‡é—œæ³¨å ±è¡¨ã€‚</p>
                        </button>

                        <button onclick="playScenario('B')" class="interactive-card w-full text-left p-4 bg-stone-50 border border-stone-200 rounded-xl hover:bg-orange-50 group">
                            <div class="flex justify-between items-center">
                                <span class="font-bold text-stone-800 group-hover:text-orange-700">æƒ…å¢ƒ Bï¼šè‡ªå‹•æé†’ (Push)</span>
                                <span class="text-stone-400">â†’</span>
                            </div>
                            <p class="text-sm text-stone-500 mt-1">å®šæ™‚æƒæç™¼ç¾æœªå¡«å¯«ï¼Œç™¼é€æé†’ã€‚</p>
                        </button>

                        <button onclick="playScenario('C')" class="interactive-card w-full text-left p-4 bg-stone-50 border border-stone-200 rounded-xl hover:bg-orange-50 group">
                            <div class="flex justify-between items-center">
                                <span class="font-bold text-stone-800 group-hover:text-orange-700">æƒ…å¢ƒ Cï¼šäººå·¥ç¢ºèª (AI Learning)</span>
                                <span class="text-stone-400">â†’</span>
                            </div>
                            <p class="text-sm text-stone-500 mt-1">AI ç™¼ç¾æ–°åˆ¥åï¼Œè«‹æ±‚ç”¨æˆ¶ç¢ºèªã€‚</p>
                        </button>

                         <button onclick="playScenario('D')" class="interactive-card w-full text-left p-4 bg-stone-50 border border-stone-200 rounded-xl hover:bg-orange-50 group">
                            <div class="flex justify-between items-center">
                                <span class="font-bold text-stone-800 group-hover:text-orange-700">æƒ…å¢ƒ Dï¼šæŸ¥è©¢èˆ‡ä¿®æ”¹ (Management)</span>
                                <span class="text-stone-400">â†’</span>
                            </div>
                            <p class="text-sm text-stone-500 mt-1">æŸ¥è©¢è¨­å®šç‹€æ…‹ï¼Œå‹•æ…‹å¢æ¸›åˆ¥åã€‚</p>
                        </button>

                        <button onclick="playScenario('E')" class="interactive-card w-full text-left p-4 bg-stone-50 border border-stone-200 rounded-xl hover:bg-orange-50 group">
                            <div class="flex justify-between items-center">
                                <span class="font-bold text-stone-800 group-hover:text-orange-700">æƒ…å¢ƒ Eï¼šä¸»å‹•æŸ¥è©¢ç‹€æ…‹ (Pull)</span>
                                <span class="text-stone-400">â†’</span>
                            </div>
                            <p class="text-sm text-stone-500 mt-1">ç”¨æˆ¶ä¸»å‹•å•ã€Œæˆ‘å¡«äº†å—ï¼Ÿã€ï¼Œç³»çµ±å³æ™‚æª¢æŸ¥ã€‚</p>
                        </button>
                    </div>
                </div>

                <!-- Right: Phone Simulator -->
                <div class="flex justify-center items-center">
                    <div class="relative w-80 h-[600px] bg-stone-900 rounded-[3rem] shadow-2xl border-4 border-stone-800 overflow-hidden">
                        <!-- Screen Header -->
                        <div class="absolute top-0 w-full h-20 bg-slate-800 z-10 flex items-end pb-2 px-4 shadow-md">
                            <div class="text-white font-bold">ç›£æ¸¬åŠ©ç† Bot</div>
                        </div>
                        
                        <!-- Chat Area -->
                        <div id="chat-container" class="absolute top-20 bottom-16 w-full bg-[#7289da] bg-opacity-10 overflow-y-auto p-4 space-y-3 flex flex-col">
                            <!-- Messages will be injected here -->
                            <div class="text-center text-xs text-stone-400 mt-4">è«‹é¸æ“‡å·¦å´æƒ…å¢ƒé–‹å§‹æ¨¡æ“¬</div>
                        </div>

                        <!-- Input Area (Visual Only) -->
                        <div class="absolute bottom-0 w-full h-16 bg-white border-t border-stone-200 flex items-center px-4 gap-2">
                            <div class="w-6 h-6 rounded-full bg-stone-300"></div>
                            <div class="flex-1 h-8 bg-stone-100 rounded-full px-3 text-xs flex items-center text-stone-400">è¼¸å…¥è¨Šæ¯...</div>
                            <div class="w-6 h-6 rounded-full bg-blue-500"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Section 3: Architecture & Workflow -->
    <section id="architecture" class="py-16 bg-stone-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="text-3xl font-bold text-stone-900 mb-8 text-center">ç³»çµ±æ¶æ§‹èˆ‡é‚è¼¯ (Workflows)</h2>
            
            <!-- Tabs -->
            <div class="flex justify-center border-b border-stone-200 mb-8">
                <button onclick="switchTab('wf-a')" id="tab-wf-a" class="tab-active px-6 py-3 text-sm font-medium transition-colors">Workflow A: èº«åˆ†è¨­å®š</button>
                <button onclick="switchTab('wf-b')" id="tab-wf-b" class="tab-inactive px-6 py-3 text-sm font-medium transition-colors">Workflow B: ç¢ºèªæ©Ÿåˆ¶</button>
                <button onclick="switchTab('wf-c')" id="tab-wf-c" class="tab-inactive px-6 py-3 text-sm font-medium transition-colors">Workflow C: æ ¸å¿ƒç›£æ¸¬</button>
                <button onclick="switchTab('wf-ai')" id="tab-wf-ai" class="tab-inactive px-6 py-3 text-sm font-medium transition-colors">AI åˆ¤å®šé‚è¼¯</button>
            </div>

            <!-- Content Area -->
            <div class="bg-white rounded-2xl shadow-sm p-8 min-h-[400px]">
                
                <!-- Workflow A Content -->
                <div id="content-wf-a" class="workflow-content block">
                    <h3 class="text-xl font-bold mb-4 text-orange-600">å³æ™‚è§¸ç™¼ï¼šä½¿ç”¨è€…è¨­å®šèˆ‡æ„åœ–è¾¨è­˜</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="bg-stone-50 p-4 rounded-lg border border-stone-200">
                            <h4 class="font-bold text-stone-800 mb-2">1. Webhook å…¥å£</h4>
                            <p class="text-sm text-stone-600">æ¥æ”¶ LINE å‚³ä¾†çš„æ–‡å­—è¨Šæ¯ã€‚</p>
                        </div>
                        <div class="flex justify-center items-center text-stone-300 hidden md:flex">â†’</div>
                        <div class="bg-stone-50 p-4 rounded-lg border border-stone-200">
                            <h4 class="font-bold text-stone-800 mb-2">2. æ„åœ–åˆ†æ (Router)</h4>
                            <ul class="text-sm text-stone-600 space-y-2 list-disc pl-4">
                                <li><strong>è‡ªæˆ‘ä»‹ç´¹:</strong> AI æå– <code>Real_Name</code>, <code>Aliases</code>ã€‚</li>
                                <li><strong>é€£çµè²¼é™„:</strong> Regex <code>/\/spreadsheets\/d\/.../</code> æå– IDã€‚</li>
                                <li><strong>æŸ¥è©¢/ä¿®æ”¹:</strong> AI è­˜åˆ¥ "åˆªé™¤", "æŸ¥è©¢" é—œéµå­—ã€‚</li>
                            </ul>
                        </div>
                        <div class="flex justify-center items-center text-stone-300 hidden md:flex">â†’</div>
                        <div class="bg-stone-50 p-4 rounded-lg border border-stone-200">
                            <h4 class="font-bold text-stone-800 mb-2">3. åŸ·è¡Œèˆ‡å›é¥‹</h4>
                            <p class="text-sm text-stone-600">
                                å¯«å…¥ <code>Master_Sync</code> è¡¨æ ¼ã€‚<br>
                                <strong>é—œéµé©—è­‰ï¼š</strong> n8n å˜—è©¦è®€å– Sheetï¼Œè‹¥ 403 Forbidden å‰‡å›å‚³éŒ¯èª¤å¼•å°ã€‚
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Workflow B Content -->
                <div id="content-wf-b" class="workflow-content hidden">
                    <h3 class="text-xl font-bold mb-4 text-orange-600">äº’å‹•è§¸ç™¼ï¼šåˆ¥åç¢ºèª</h3>
                    <div class="flex flex-col md:flex-row gap-4 items-center justify-center">
                        <div class="w-full md:w-1/3 bg-stone-50 p-4 rounded-lg border border-stone-200 text-center">
                            <div class="text-sm text-stone-500 mb-1">è§¸ç™¼æº</div>
                            <div class="font-bold">LINE Postback Action</div>
                            <div class="text-xs text-stone-400 mt-1">ä½¿ç”¨è€…é»æ“Šã€æ˜¯/å¦ã€‘æŒ‰éˆ•</div>
                        </div>
                        <div class="text-2xl text-stone-300">â†“</div>
                        <div class="w-full md:w-1/3 bg-stone-50 p-4 rounded-lg border border-stone-200 text-center">
                            <div class="text-sm text-stone-500 mb-1">é‚è¼¯è™•ç†</div>
                            <div class="font-bold">IF Clicked 'YES'</div>
                            <div class="text-xs text-stone-400 mt-1">è®€å– <code>Pending_Alias</code> â†’ Append to <code>Aliases</code></div>
                        </div>
                        <div class="text-2xl text-stone-300">â†“</div>
                        <div class="w-full md:w-1/3 bg-stone-50 p-4 rounded-lg border border-stone-200 text-center">
                            <div class="text-sm text-stone-500 mb-1">æ¸…ç†</div>
                            <div class="font-bold">Empty Pending_Alias</div>
                            <div class="text-xs text-stone-400 mt-1">å›å‚³ç¢ºèªè¨Šæ¯</div>
                        </div>
                    </div>
                </div>

                <!-- Workflow C Content -->
                <div id="content-wf-c" class="workflow-content hidden">
                    <h3 class="text-xl font-bold mb-4 text-orange-600">æ ¸å¿ƒç›£æ¸¬ï¼šå®šæ™‚èˆ‡ä¸»å‹•æŸ¥è©¢</h3>
                    <div class="space-y-4">
                        <div class="flex items-start gap-4">
                            <div class="bg-orange-100 text-orange-800 font-bold px-3 py-1 rounded text-sm shrink-0">Trigger</div>
                            <div>
                                <h4 class="font-bold">Cron (19, 20, 21é») æˆ– æ‰‹å‹•èª¿ç”¨</h4>
                                <p class="text-sm text-stone-600">è®€å– Admin è¡¨ï¼Œç²å–æ‰€æœ‰ä½¿ç”¨è€…çš„ <code>Target_Sheet_IDs</code>ã€‚</p>
                            </div>
                        </div>
                        <div class="flex items-start gap-4">
                            <div class="bg-blue-100 text-blue-800 font-bold px-3 py-1 rounded text-sm shrink-0">Loop</div>
                            <div>
                                <h4 class="font-bold">å¤šè¡¨å¾ªç’° (Split in Batches)</h4>
                                <p class="text-sm text-stone-600">
                                    é‡å°æ¯å€‹ Sheet ID è®€å–è³‡æ–™ã€‚
                                    <span class="bg-red-100 text-red-700 text-xs px-2 py-0.5 rounded ml-2">Robustness: Wait 1s & Continue on Fail</span>
                                </p>
                            </div>
                        </div>
                        <div class="flex items-start gap-4">
                            <div class="bg-purple-100 text-purple-800 font-bold px-3 py-1 rounded text-sm shrink-0">AI Judge</div>
                            <div>
                                <h4 class="font-bold">æ¨¡ç³Šæ¯”å° (GPT-4o/Claude)</h4>
                                <p class="text-sm text-stone-600">è¼¸å…¥ï¼š<code>System_Date</code>, <code>Aliases</code>, <code>Sheet_JSON</code>ã€‚<br>è¼¸å‡ºï¼š<code>{status: "missing" | "completed"}</code></p>
                            </div>
                        </div>
                        <div class="flex items-start gap-4">
                            <div class="bg-green-100 text-green-800 font-bold px-3 py-1 rounded text-sm shrink-0">Result</div>
                            <div>
                                <h4 class="font-bold">å½™æ•´èˆ‡æ¨æ’­</h4>
                                <p class="text-sm text-stone-600">å°‡å¤šå€‹ Sheet çš„çµæœåˆä½µç‚ºå–®ä¸€è¨Šæ¯ã€‚è‹¥å…¨æ•¸å®Œæˆå‰‡å›å‚³é¼“å‹µè¨Šæ¯ã€‚</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- AI Logic Content -->
                <div id="content-wf-ai" class="workflow-content hidden">
                    <h3 class="text-xl font-bold mb-4 text-orange-600">AI Node Prompt è¨­è¨ˆ</h3>
                    <div class="bg-stone-900 text-stone-50 p-6 rounded-lg font-mono text-sm overflow-x-auto">
                        <p class="text-stone-400 mb-2">// System Prompt</p>
                        <p>ä½ æ˜¯ä¸€ä½ç²¾æº–çš„è³‡æ–™æŸ¥æ ¸å“¡ã€‚</p>
                        <p>ç³»çµ±æ—¥æœŸï¼š<span class="text-green-400">{{$today}}</span></p>
                        <p>ä½¿ç”¨è€…åˆ¥åæ¸…å–®ï¼š<span class="text-green-400">{{$aliases}}</span></p>
                        <p>æ•¸æ“šä¾†æºï¼š<span class="text-green-400">{{$sheet_data}}</span></p>
                        <br>
                        <p>è«‹åŸ·è¡Œä»¥ä¸‹åˆ†æï¼š</p>
                        <p>1. æ‰¾å‡ºæ•¸æ“šä¸­æ‰€æœ‰æ—¥æœŸèªæ„ç­‰åŒæ–¼ã€Œç³»çµ±æ—¥æœŸã€çš„è¡Œ (æ¨¡ç³ŠåŒ¹é…)ã€‚</p>
                        <p>2. æª¢æŸ¥é€™äº›è¡Œçš„ã€Œå§“åç›¸é—œæ¬„ä½ã€æ˜¯å¦èˆ‡ã€Œåˆ¥åæ¸…å–®ã€åŒ¹é…ã€‚</p>
                        <p>3. é‡å°åŒ¹é…æˆåŠŸçš„è¡Œï¼Œåˆ¤æ–·å…¶ã€Œå·¥ä½œ/é€²åº¦/ç°½åˆ°ã€æ¬„ä½æ˜¯å¦ç‚ºç©ºå€¼æˆ–åˆå§‹é è¨­å€¼ã€‚</p>
                        <p>4. è¼¸å‡º JSON æ ¼å¼ï¼š<span class="text-yellow-400">{"status": "missing" | "completed", "found_name": "...", "sheet_id": "..."}</span></p>
                    </div>
                    <div class="mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg text-sm text-yellow-800">
                        <strong>è§£æ±ºç—›é»ï¼š</strong> é€é AI èªæ„ç†è§£ï¼Œè§£æ±ºäº†ã€Œæ—¥æœŸæ ¼å¼ä¸ä¸€ (2024/1/1 vs 1-1)ã€ä»¥åŠã€ŒSheet æ¬„ä½é †åºè®Šå‹•ã€çš„å•é¡Œã€‚
                    </div>
                </div>

            </div>
        </div>
    </section>

    <!-- Section 4: Data Model & Robustness -->
    <section class="py-16 bg-white border-t border-stone-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
                <!-- Data Model Table -->
                <div>
                    <h2 class="text-2xl font-bold text-stone-900 mb-6">æ ¸å¿ƒè³‡æ–™æ¨¡å‹ (Master_Sync)</h2>
                    <p class="text-sm text-stone-500 mb-4">æ­¤è¡¨ä½æ–¼ Admin Google Sheetï¼Œä½œç‚ºç³»çµ±çš„ç‹€æ…‹è³‡æ–™åº«ã€‚</p>
                    <div class="overflow-x-auto bg-white border border-stone-200 rounded-xl shadow-sm">
                        <table class="min-w-full divide-y divide-stone-200 text-sm">
                            <thead class="bg-stone-50">
                                <tr>
                                    <th class="px-4 py-3 text-left font-medium text-stone-500">æ¬„ä½åç¨±</th>
                                    <th class="px-4 py-3 text-left font-medium text-stone-500">ç”¨é€”</th>
                                    <th class="px-4 py-3 text-left font-medium text-stone-500">ç¯„ä¾‹æ•¸æ“š</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-stone-200">
                                <tr>
                                    <td class="px-4 py-3 font-mono text-stone-700">Line_UID</td>
                                    <td class="px-4 py-3 text-stone-600">å”¯ä¸€è­˜åˆ¥</td>
                                    <td class="px-4 py-3 text-stone-400">U8429...</td>
                                </tr>
                                <tr>
                                    <td class="px-4 py-3 font-mono text-stone-700">Real_Name</td>
                                    <td class="px-4 py-3 text-stone-600">æ­£å¼å§“å</td>
                                    <td class="px-4 py-3 text-stone-800">å¼µå¤§æ˜</td>
                                </tr>
                                <tr>
                                    <td class="px-4 py-3 font-mono text-stone-700">Aliases</td>
                                    <td class="px-4 py-3 text-stone-600">æ‰€æœ‰åˆ¥å</td>
                                    <td class="px-4 py-3 text-stone-800">å°å¼µ, Tommy</td>
                                </tr>
                                <tr>
                                    <td class="px-4 py-3 font-mono text-stone-700">Pending_Alias</td>
                                    <td class="px-4 py-3 text-stone-600">å¾…ç¢ºèªåˆ¥å</td>
                                    <td class="px-4 py-3 text-orange-600">è€å¼µ</td>
                                </tr>
                                <tr>
                                    <td class="px-4 py-3 font-mono text-stone-700">Target_Sheet_IDs</td>
                                    <td class="px-4 py-3 text-stone-600">ç›£æ¸¬è¡¨å–®</td>
                                    <td class="px-4 py-3 text-stone-800">ID_1, ID_2</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Robustness Cards -->
                <div>
                    <h2 class="text-2xl font-bold text-stone-900 mb-6">ç©©å®šæ€§è¨­è¨ˆ (Robustness)</h2>
                    <div class="grid grid-cols-1 gap-4">
                        <div class="p-4 bg-stone-50 rounded-xl border border-stone-200">
                            <h4 class="font-bold text-stone-800 flex items-center gap-2">
                                <span class="text-orange-600">â—</span> æ—¥æœŸæ ¼å¼æ··äº‚
                            </h4>
                            <p class="text-sm text-stone-600 mt-1">AI Node è¼¸å…¥ç«¯æ³¨å…¥ `System_Date`ï¼Œè¦æ±‚ AI é€²è¡Œèªæ„ä¸Šçš„æ—¥æœŸæ¯”å°ï¼Œè€Œéå­—ä¸²å®Œå…¨åŒ¹é…ã€‚</p>
                        </div>
                        <div class="p-4 bg-stone-50 rounded-xl border border-stone-200">
                            <h4 class="font-bold text-stone-800 flex items-center gap-2">
                                <span class="text-orange-600">â—</span> Sheet çµæ§‹è®Šå‹•
                            </h4>
                            <p class="text-sm text-stone-600 mt-1">ä¸é™åˆ¶è®€å– A:B æ¬„ï¼Œè€Œæ˜¯è®€å–æ•´åˆ— JSONï¼Œç”± AI è‡ªå‹•åˆ¤æ–·å“ªå€‹æ¬„ä½æ˜¯ã€Œå§“åã€ã€å“ªå€‹æ˜¯ã€Œå¡«å¯«å…§å®¹ã€ã€‚</p>
                        </div>
                        <div class="p-4 bg-stone-50 rounded-xl border border-stone-200">
                            <h4 class="font-bold text-stone-800 flex items-center gap-2">
                                <span class="text-orange-600">â—</span> API Rate Limit
                            </h4>
                            <p class="text-sm text-stone-600 mt-1">ä½¿ç”¨ <code>Wait Node</code> (å»¶é² 1 ç§’) èˆ‡ <code>Split In Batches</code>ï¼Œä¸¦é–‹å•Ÿ <code>Continue on Fail</code> é˜²æ­¢å–®ä¸€éŒ¯èª¤ä¸­æ–·æµç¨‹ã€‚</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Section 5: Implementation Checklist -->
    <section id="implementation" class="py-16 bg-stone-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="text-3xl font-bold text-stone-900 mb-8 text-center">å¯¦ä½œæª¢æŸ¥æ¸…å–® (Checklist)</h2>
            <p class="text-center text-stone-600 mb-10 max-w-2xl mx-auto">
                é»æ“Šä¸‹æ–¹é …ç›®å¯æ¨™è¨˜å®Œæˆç‹€æ…‹ï¼Œåœ–è¡¨å°‡å³æ™‚æ›´æ–°å°ˆæ¡ˆé€²åº¦ã€‚
            </p>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
                <!-- Checklist Items -->
                <div class="space-y-6">
                    <div>
                        <h3 class="font-bold text-stone-800 mb-3 border-b border-stone-200 pb-1">Phase 1: ç’°å¢ƒèªè­‰</h3>
                        <div class="space-y-2">
                            <label class="flex items-center space-x-3 cursor-pointer">
                                <input type="checkbox" class="task-checkbox form-checkbox h-5 w-5 text-orange-600 rounded focus:ring-orange-500" onchange="updateChart()">
                                <span class="text-stone-700">Google Cloud Console å•Ÿç”¨ Sheets & Drive API</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer">
                                <input type="checkbox" class="task-checkbox form-checkbox h-5 w-5 text-orange-600 rounded focus:ring-orange-500" onchange="updateChart()">
                                <span class="text-stone-700">å»ºç«‹ OAuth 2.0 Client ID ä¸¦é€£ç·š n8n</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer">
                                <input type="checkbox" class="task-checkbox form-checkbox h-5 w-5 text-orange-600 rounded focus:ring-orange-500" onchange="updateChart()">
                                <span class="text-stone-700">å»ºç«‹ LINE Channel å–å¾— Token/Secret</span>
                            </label>
                        </div>
                    </div>

                    <div>
                        <h3 class="font-bold text-stone-800 mb-3 border-b border-stone-200 pb-1">Phase 2: è³‡æ–™èˆ‡ AI</h3>
                        <div class="space-y-2">
                            <label class="flex items-center space-x-3 cursor-pointer">
                                <input type="checkbox" class="task-checkbox form-checkbox h-5 w-5 text-orange-600 rounded focus:ring-orange-500" onchange="updateChart()">
                                <span class="text-stone-700">å»ºç«‹ Master_Sync è¡¨èˆ‡æ¸¬è©¦æ•¸æ“š</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer">
                                <input type="checkbox" class="task-checkbox form-checkbox h-5 w-5 text-orange-600 rounded focus:ring-orange-500" onchange="updateChart()">
                                <span class="text-stone-700">AI Prompt æ¸¬è©¦ (åˆ¥åèˆ‡æ„åœ–)</span>
                            </label>
                        </div>
                    </div>

                    <div>
                        <h3 class="font-bold text-stone-800 mb-3 border-b border-stone-200 pb-1">Phase 3: æµç¨‹ä¸²æ¥</h3>
                        <div class="space-y-2">
                            <label class="flex items-center space-x-3 cursor-pointer">
                                <input type="checkbox" class="task-checkbox form-checkbox h-5 w-5 text-orange-600 rounded focus:ring-orange-500" onchange="updateChart()">
                                <span class="text-stone-700">å¯¦ä½œ Regex èˆ‡å¤šé€£çµè™•ç†</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer">
                                <input type="checkbox" class="task-checkbox form-checkbox h-5 w-5 text-orange-600 rounded focus:ring-orange-500" onchange="updateChart()">
                                <span class="text-stone-700">å¯¦ä½œ Workflow C å½™æ•´é‚è¼¯</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer">
                                <input type="checkbox" class="task-checkbox form-checkbox h-5 w-5 text-orange-600 rounded focus:ring-orange-500" onchange="updateChart()">
                                <span class="text-stone-700">æ¸¬è©¦äººå·¥ç¢ºèªæŒ‰éˆ•æ©Ÿåˆ¶</span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Chart -->
                <div class="flex flex-col items-center">
                    <div class="chart-container">
                        <canvas id="progressChart"></canvas>
                    </div>
                    <p id="progressText" class="mt-4 text-xl font-bold text-stone-700">å®Œæˆåº¦: 0%</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-stone-900 text-stone-400 py-8">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p>Â© 2026 LINE x n8n Project Plan Interactive Report.</p>
        </div>
    </footer>

    <!-- JavaScript Logic -->
    <script>
        // --- State Management ---
        const state = {
            currentScenario: null,
            checklistTotal: 0,
            checklistCompleted: 0
        };

        // --- Chat Simulator Logic ---
        const scenarios = {
            'A': [
                { sender: 'bot', text: 'æ­¡è¿ä½¿ç”¨ç›£æ¸¬åŠ©ç†ï¼è«‹å‘Šè¨´æˆ‘æ‚¨çš„çœŸå¯¦å§“åï¼Œä»¥åŠå¤§å®¶åœ¨å ±è¡¨ä¸Šå¯èƒ½æœƒæ€éº¼ç¨±å‘¼æ‚¨ï¼Ÿ' },
                { sender: 'user', text: 'æˆ‘æ˜¯å¼µå¤§æ˜ï¼Œå ±è¡¨ä¸Šå¯èƒ½æœƒå¯«å¤§æ˜ã€å°å¼µï¼Œæˆ–æ˜¯ Tommyã€‚' },
                { sender: 'system', text: 'AI æå–: Name="å¼µå¤§æ˜", Aliases=["å¤§æ˜", "å°å¼µ", "Tommy"]' },
                { sender: 'bot', text: 'å·²ç‚ºæ‚¨è¨­å®šå¥½èº«åˆ†ï¼æœªä¾†æˆ‘æœƒç›£æ¸¬é€™å››å€‹åå­—ï¼Œå°å—ï¼Ÿ', type: 'confirm' },
                { sender: 'user', text: 'æ˜¯ (æŒ‰éˆ•é»æ“Š)' },
                { sender: 'bot', text: 'è«‹è²¼ä¸Šæ‚¨éœ€è¦æˆ‘å¹«å¿™ç›£æ¸¬çš„ Google Sheet å®Œæ•´ç¶²å€ï¼ˆå¯ä¸€æ¬¡è²¼å¤šå€‹ï¼‰ã€‚' },
                { sender: 'user', text: 'https://docs.google.com/spreadsheets/d/abc12345\nhttps://docs.google.com/spreadsheets/d/xyz98765' },
                { sender: 'system', text: 'n8n: é©—è­‰æ¬Šé™... ID_1 OK, ID_2 OK' },
                { sender: 'bot', text: 'è¨­å®šå®Œæˆï¼é€£çµ A èˆ‡ B å·²ç´å…¥æ‚¨çš„æ¯æ—¥ç›£æ¸¬æ¸…å–®ã€‚' }
            ],
            'B': [
                { sender: 'system', text: 'Cron Trigger: 20:00' },
                { sender: 'system', text: 'Workflow C: æƒæ Sheet A... ç™¼ç¾ "å°å¼µ" æœªå¡«å¯«' },
                { sender: 'bot', text: 'å¼µå¤§æ˜æ‚¨å¥½ï¼Œä»Šæ—¥åœ¨ã€å ±è¡¨ Aã€å°šæœªå¡«å¯«ï¼Œè«‹é»æ“Šé€£çµè£œé½Šï¼š[é€£çµ]' }
            ],
            'C': [
                { sender: 'system', text: 'Workflow C: æƒæ Sheet C... ç™¼ç¾æœªå¡«å¯«å§“å "è€å¼µ"' },
                { sender: 'system', text: 'AI Judge: "è€å¼µ" é¡ä¼¼ "å¼µå¤§æ˜" ä½†ä¸åœ¨æ¸…å–®ä¸­' },
                { sender: 'bot', text: 'å¼µå¤§æ˜æ‚¨å¥½ï¼Œæˆ‘åœ¨å ±è¡¨ C ç™¼ç¾ã€è€å¼µã€å°šæœªå¡«å¯«ï¼Œè«‹å•ã€è€å¼µã€æ˜¯æ‚¨çš„åˆ¥åå—ï¼Ÿ', type: 'confirm' },
                { sender: 'user', text: 'æ˜¯ (æŒ‰éˆ•é»æ“Š)' },
                { sender: 'system', text: 'Update: Append "è€å¼µ" to Aliases' },
                { sender: 'bot', text: 'å¥½çš„ï¼Œå·²ç´€éŒ„ï¼ä¸‹æ¬¡æˆ‘ä¹Ÿæœƒå¹«æ‚¨æ³¨æ„é€™å€‹åå­—ã€‚' }
            ],
            'D': [
                { sender: 'user', text: 'æˆ‘çš„è¨­å®š' },
                { sender: 'bot', text: 'å§“å: å¼µå¤§æ˜\nåˆ¥å: å°å¼µ, Tommy\né—œæ³¨å ±è¡¨: å ±è¡¨A, å ±è¡¨B' },
                { sender: 'user', text: 'å¢åŠ åˆ¥åï¼šå¤§å¼·' },
                { sender: 'system', text: 'AI Intent: Add Alias "å¤§å¼·"' },
                { sender: 'bot', text: 'å·²æ–°å¢åˆ¥åã€Œå¤§å¼·ã€ã€‚' }
            ],
            'E': [
                { sender: 'user', text: 'å¹«æˆ‘æª¢æŸ¥é€²åº¦' },
                { sender: 'system', text: 'Trigger Workflow C (Active Mode)' },
                { sender: 'system', text: 'Scanning...' },
                { sender: 'bot', text: 'å¤ªæ£’äº†ï¼æ‚¨ç›®å‰çš„å ±è¡¨çš†å·²å®Œæˆã€‚' }
            ]
        };

        function playScenario(scenarioId) {
            const chatContainer = document.getElementById('chat-container');
            chatContainer.innerHTML = ''; // Clear chat
            state.currentScenario = scenarioId;

            const messages = scenarios[scenarioId];
            let delay = 0;

            messages.forEach((msg, index) => {
                setTimeout(() => {
                    const msgDiv = document.createElement('div');
                    msgDiv.className = `max-w-[85%] p-3 rounded-lg text-sm message-anim ${
                        msg.sender === 'user' 
                            ? 'bg-blue-500 text-white self-end rounded-br-none ml-auto' 
                            : msg.sender === 'system'
                                ? 'bg-stone-600 text-stone-200 self-center text-xs font-mono border border-stone-500'
                                : 'bg-white text-stone-800 self-start rounded-bl-none shadow-sm border border-stone-200'
                    }`;
                    
                    if (msg.sender === 'system') {
                        msgDiv.innerText = `[ç³»çµ±] ${msg.text}`;
                    } else {
                        msgDiv.innerText = msg.text;
                    }

                    if (msg.type === 'confirm') {
                        const btnDiv = document.createElement('div');
                        btnDiv.className = 'flex gap-2 mt-2';
                        btnDiv.innerHTML = `
                            <button class="bg-blue-100 text-blue-600 px-3 py-1 rounded text-xs hover:bg-blue-200">æ˜¯</button>
                            <button class="bg-stone-100 text-stone-600 px-3 py-1 rounded text-xs hover:bg-stone-200">å¦</button>
                        `;
                        msgDiv.appendChild(btnDiv);
                    }

                    chatContainer.appendChild(msgDiv);
                    chatContainer.scrollTop = chatContainer.scrollHeight;
                }, delay);

                delay += 1000; // 1 second delay between messages
            });
        }

        // --- Tab Logic ---
        function switchTab(tabId) {
            // Hide all content
            document.querySelectorAll('.workflow-content').forEach(el => el.classList.add('hidden'));
            document.getElementById(`content-${tabId}`).classList.remove('hidden');

            // Update tab styles
            document.querySelectorAll('button[id^="tab-"]').forEach(btn => {
                btn.classList.remove('tab-active');
                btn.classList.add('tab-inactive');
            });
            const activeBtn = document.getElementById(`tab-${tabId}`);
            activeBtn.classList.remove('tab-inactive');
            activeBtn.classList.add('tab-active');
        }

        // --- Chart.js: Implementation Tracker ---
        let progressChart;

        function initChart() {
            const ctx = document.getElementById('progressChart').getContext('2d');
            
            // Calculate initial counts
            const checkboxes = document.querySelectorAll('.task-checkbox');
            state.checklistTotal = checkboxes.length;
            
            progressChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['å·²å®Œæˆ', 'å¾…è¾¦'],
                    datasets: [{
                        data: [0, state.checklistTotal],
                        backgroundColor: [
                            '#ea580c', // Orange-600
                            '#e7e5e4'  // Stone-200
                        ],
                        borderWidth: 0,
                        hoverOffset: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                font: {
                                    family: "'Noto Sans TC', sans-serif"
                                }
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.label + ': ' + context.raw + ' é …';
                                }
                            }
                        }
                    },
                    cutout: '70%'
                }
            });
        }

        function updateChart() {
            const checkboxes = document.querySelectorAll('.task-checkbox');
            const completed = Array.from(checkboxes).filter(cb => cb.checked).length;
            const remaining = state.checklistTotal - completed;

            // Update state
            state.checklistCompleted = completed;

            // Update Chart Data
            progressChart.data.datasets[0].data = [completed, remaining];
            progressChart.update();

            // Update Text
            const percentage = Math.round((completed / state.checklistTotal) * 100);
            document.getElementById('progressText').innerText = `å®Œæˆåº¦: ${percentage}%`;
        }

        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            initChart();
            // Start with a demo message in simulator
            setTimeout(() => {
                const chatContainer = document.getElementById('chat-container');
                const msgDiv = document.createElement('div');
                msgDiv.className = 'bg-white text-stone-800 self-start rounded-bl-none shadow-sm border border-stone-200 max-w-[85%] p-3 rounded-lg text-sm message-anim';
                msgDiv.innerText = 'é»æ“Šå·¦å´æƒ…å¢ƒæŒ‰éˆ•é–‹å§‹æ¨¡æ“¬...';
                chatContainer.appendChild(msgDiv);
            }, 500);
        });

    </script>
</body>
</html>